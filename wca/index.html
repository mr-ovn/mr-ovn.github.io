<!DOCTYPE html>
<html>
<meta charset= "utf-8"/>
<title>WCA</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
<style>
    @charset 'utf-8';
     body, h3,h4,h6 {font-family: 'Comic Neue', cursive; font-weight: bold; }
    .line {stroke-width: 6; fill: none}
    .line {stroke-width: 6; fill: none}
</style>
<body>
<div class="w3-row">
   <div class="w3-col m5 w3-card w3-border">
      <div class="w3-row-padding w3-center" style="font-size: 16px">
        
          <div class="w3-col m6 s3">
             <p>
                <label class="w3-text-blue"><b>W Dir.</b></label>
               
                <input id="inputWD" class="w3-block w3-center" type="number" placeholder="0-360">
             </p>
          </div>
          <div class="w3-col m6 s3">
              <p>
               <label class="w3-text-blue"><b>W Vel.</b></label>
               
               <input id="inputWV" class="w3-block w3-center" type="number" placeholder="kts.">
              </p>
          </div>
          <div class="w3-col m6 s3 ">
              <p>
               <label class="w3-text-green"><b>TC</b></label>
              
              <input id="inputTC" class="w3-block w3-center" type="number" placeholder="0-360">
              </p>
          </div>
          <div class="w3-col m6 s3">
              <p>
              <label class="w3-text-red"><b>TAS</b></label>
              
              <input id="inputTAS" class="w3-block w3-center" type="number" placeholder="kts.">
              </p>
          </div>
          <div class="w3-container w3-center">
             <button class="w3-block" type="button" onclick="myFunction()">show</button>
             <p><b class="w3-text-blue">WCA: <span id="WCA"></span>;</b>   <b class="w3-text-green">GS: <span id="GS"></span>;</b>   <b class="w3-text-red">TH: <span id="TH"></span>.</b></p>
             <div class="w3-hide-small">
               <h3>
                 Sine theorem
               </h3> 
               <svg width="200" height="120">
                 <line x1="30" y1="110" x2="90" y2="15" style="stroke-width:3; stroke: #4caf50"/>
                 <line x1="90" y1="15" x2="165" y2="15" style="stroke-width:3; stroke: #2196f3"/>
                 <line x1="30" y1="110" x2="165" y2="15" style="stroke-width:3; stroke: #f44336"/>
               
                 <circle cx="30" cy="110" r="4" stroke="#2196f3" fill="#2196f3"/>
                 <circle cx="90" cy="15" r="4" stroke="#f44336" fill="#f44336"/>
                 <circle cx="165" cy="15" r="4" stroke="#4caf50" fill="#4caf50"/>

                 <text x="60" y="15" fill="#f44336">∠A</text>
                 <text x="170" y="15" fill="#4caf50">∠B</text>
                 <text x="0" y="120" fill="#2196f3">∠C</text>
               
                 <text x="105" y="70" fill="#f44336">a</text>
                 <text x="50" y="57" fill="#4caf50">b</text>
                 <text x="125" y="10" fill="#2196f3">c</text>
               
               </svg>
               <h6>
                 <font class="w3-text-red">sin(A)/a</font> = <font class="w3-text-green">sin(B)/b</font> = <font class="w3-text-blue">sin(C)/c</font>
               </h6>
               <div class="w3-border">
                  <p>
                     if <font class="w3-text-red">∠(TC'&'WD) = 0°</font>, <font class="w3-text-green">GS</font> = <font class="w3-text-red">TAS</font> - <font class="w3-text-blue">WD</font>;
                  </p>
                  <p>
                    if <font class="w3-text-red">∠(TC'&'WD) = 180°</font>, <font class="w3-text-green">GS</font> = <font class="w3-text-red">TAS</font> + <font class="w3-text-blue">WD</font>;
                  </p>
                  <p>
                   <font class="w3-text-blue">WCA = 0°</font>
                  </p>
               </div>
               <p>
                 => <font class="w3-text-blue">sin(WCA)</font> = <font class="w3-text-red">sin(TC'&'WD)/TAS</font><font class="w3-text-blue">*WV</font>
               </p>
               <p>
                 => <font class="w3-text-green">GS</font> = <font class="w3-text-red">TAS / sin(TC'&'WD)</font><font class="w3-text-green"> * sin(180-∠(TC'&'WD)-∠WCA)</font>
               </p>
               <p>or</p>
               <p>
                 => <font class="w3-text-green">GS</font> = <font class="w3-text-blue">WD / sin(WCA)</font><font class="w3-text-green"> * sin(180-∠(TC'&'WD)-∠WCA)</font>
               </p>
             </div>
             
          </div> 
       </div>
</div>
<div class="w3-col m7 w3-center">
<div class="w3-hide-small"><br><br><br>
</div>
<svg  width="361" height="514">
     <circle id="ofTAS" cx="181" cy="200" r="10" stroke="#f44336" fill="#f44336"/>
     <circle id="pointAngleGS" r="10" cx="181" cy="200" stroke="#4caf50" fill="#4caf50"/>
     <ellipse id="ellWCA" cx="181" cy="514" rx="0" ry="5" style="fill:#2196f3;stroke:#2196f3;stroke-width:1" />
     
     <path class="line" stroke-dasharray="14,10" d="M 181 15 l 0 185" stroke="#4caf50"/>
     <line id="lineTAS" class="line" x1="181" y1="560" x2="181" y2="200" style="stroke: #f44336"/>
     <path id="lineGS" class="line" d="M 181 200 l 0 360" stroke="#4caf50"/>
     <line id="lineWind" class="line" x1="181" y1="200" x2="181" y2="200" style="stroke: #2196f3"/>
     
  
     <circle id="vecTC" class="point" cx="181" cy="15" r="5" stroke="#4caf50" fill="#4caf50"/>
     <circle id="vecWind" class="point" cx="181" cy="200" r="5" stroke="#2196f3" fill="#2196f3"/>
     <circle id="vecTAS" class="point" cx="181" cy="200" r="5" stroke="#f44336" fill="#f44336"/>

     Sorry, your browser does not support inline SVG.
</svg>
<div class="w3-row w3-center w3-small">
  <div class="w3-col s4">
    <svg id="pointers1" class="w3-right" width="101" height="85">
      <polyline points="51,84 26,61 44,64 41,1 51,6 61,1 58,64 75,61 51,84 26,61"
      style="fill:#2196f3;stroke:#2196f3;stroke-width:1" />
    </svg>
  </div>
  <div class="w3-col s4">
     <svg id="plane" width="101" height="85">
       <path d="m51.0,81.789-3.312-6.008h-13.25c-.414-1.047.625-3.32.625-3.32 2.688-3.523 11.594-7.234 11.594-7.234l-2.688-35-34.789-2.079c-5.797-.828-5.383-4.953-5.383-4.953 0-3.32 6-4.359 6-4.359l34.586-3.914 2.477-10.367h-4.758v-1.453h6.406l2.696-3.102 2.281,3.102h6.422v1.453h-4.758l2.477,10.367 34.57,3.914c0,0 6.008,1.039 6.008,4.359 0,0 .414,4.125-5.383,4.953l-34.781,2.078-2.694,35c0,0 8.913,3.711 11.594,7.233 0,0 1.039,2.272.625,3.32h-13.244l-3.321,6.01" stroke="black" fill="#ff9800"/>
       </svg>
  </div>
  <div class="w3-col s4">
    <svg id="pointers2" class="w3-left" width="101" height="85">
      <polyline points="51,84 26,61 44,64 41,1 51,6 61,1 58,64 75,61 51,84 26,61"
      style="fill:#2196f3;stroke:#2196f3;stroke-width:1" />
    </svg>
  </div>
</div> 
</div>
</div>
  
<script>
  
   function myFunction() {
      
      var WD,TC,WV,TAS,WDofTC,LorR,AofTAS,sinWCA,WCA,GS,plRot;
      var x1,y1,x2,y2,rWV,x20,y20,TH,ofTH,cx,rx;
     
  WD = parseInt(document.getElementById("inputWD").value);
  TC = parseInt(document.getElementById("inputTC").value);
  WV = parseInt(document.getElementById("inputWV").value);
 TAS = parseInt(document.getElementById("inputTAS").value);
 
 if ( isNaN(WD) || isNaN(WV) || isNaN(TC) || isNaN(TAS) || WD < 0 || WD > 360 || TC < 0 || TC > 360 || WV >= TAS) {    
   } else {
     
 if (((360-TC)+WD) > 360) {
    WDofTC = ((360-TC)+WD)-360;
  } else {
    WDofTC = ((360-TC)+WD);
  }
 if (WDofTC == 360 || WDofTC == 180 || WDofTC == 0) {
     LorR = "";
  } else if (WDofTC > 180) {
    LorR = "L-";
  } else {
    LorR = "R+";
  }
 if (WDofTC > 180) {
    AofTAS = WDofTC-180;
  } else {
    AofTAS = 180-WDofTC;
  }
    
     sinWCA = WV/TAS*Math.sin(AofTAS*Math.PI/180);
     WCA    = Math.asin(sinWCA)*180/Math.PI;
 
 if (WDofTC == 180) {
     GS = TAS+WV;
  } else if (WDofTC == 360 || WDofTC ==0) {
     GS = TAS - WV;
  } else {
     GS = TAS*Math.sin((180-AofTAS-WCA)*Math.PI/180)/Math.sin(AofTAS*Math.PI/180);
  }
     
   if (WDofTC > 180) {
    plRot = WCA*(-1);
  } else {
    plRot = WCA;
  }
   
   if (WDofTC > 180) {
    ofTH = TC - WCA;
  } else {
    ofTH = TC + WCA;
  } 
   
   if (ofTH < 0) {
    TH = ofTH + 360;
  } else if (ofTH > 360) {
    TH = ofTH - 360;
  } else {
    TH = ofTH;
  }
     
     rWV = 360/GS*WV;
      x1 = 181; y1 = -200;
      x2 = (x1)+(rWV*Math.sin(WDofTC*Math.PI/180));
      y2 = ((y1)+(rWV*Math.cos(WDofTC*Math.PI/180)))*(-1);
     
     rx = (46*Math.sin(WCA*Math.PI/180))/2;
   if (WDofTC > 180) {
     cx = 181+(rx*(-1));
   } else {
     cx = 181+rx;
   } 
   
  document.getElementById("WCA").innerHTML = WCA.toFixed(0)+"&deg"+LorR;
  document.getElementById("GS").innerHTML = GS.toFixed(0)+" kts.";
  document.getElementById("TH").innerHTML = TH.toFixed(0)+"&deg";
  document.getElementById("pointers1").style.transform = "rotate("+WDofTC+"deg)";
  document.getElementById("pointers2").style.transform = "rotate("+WDofTC+"deg)";
  document.getElementById("plane").style.transform = "rotate("+plRot+"deg)";
  document.getElementById("lineWind").setAttribute("x2",x2.toFixed(2)); 
  document.getElementById("lineWind").setAttribute("y2",y2.toFixed(2));  
  document.getElementById("lineTAS").setAttribute("x2",x2.toFixed(2)); 
  document.getElementById("lineTAS").setAttribute("y2",y2.toFixed(2));
  document.getElementById("vecTAS").setAttribute("cx",x2.toFixed(2)); 
  document.getElementById("vecTAS").setAttribute("cy",y2.toFixed(2));
  document.getElementById("pointAngleGS").setAttribute("cx",x2.toFixed(2)); 
  document.getElementById("pointAngleGS").setAttribute("cy",y2.toFixed(2));
  document.getElementById("ellWCA").setAttribute("cx",cx.toFixed(2)); 
  document.getElementById("ellWCA").setAttribute("rx",rx.toFixed(2));
   }
}
</script>
</body>
</html>
